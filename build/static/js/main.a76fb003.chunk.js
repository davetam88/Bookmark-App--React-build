(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(34)},21:function(e,t,a){},23:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){},31:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),l=a.n(o),c=a(37),i=(a(21),a(15)),s=a(5),m=a(6),u=a(8),k=a(7),d=a(9),p=a(36),b=r.a.createContext({bookmarks:[],addBookmark:function(){},deleteBookmark:function(){}}),h={API_ENDPOINT:"https://tf-ed-bookmarks-api.herokuapp.com/v3/bookmarks",API_KEY:"`$$2a$10$ra1z0n2XnSnbMP/ipTMHeOqqrI7i8Rssm/z8MHTxgb7LamV7LpfXu`"},E=(a(23),function(){return r.a.createElement("span",{className:"AddBookmark__required"},"*")}),f=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},a.handleSubmit=function(e){e.preventDefault();var t=e.target,n=t.title,r=t.url,o=t.description,l=t.rating,c={title:n.value,url:r.value,description:o.value,rating:l.value};a.setState({error:null}),fetch(h.API_ENDPOINT,{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json",authorization:"bearer ".concat(h.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){n.value="",r.value="",o.value="",l.value="",a.context.addBookmark(e),a.props.history.push("/")}).catch(function(e){a.setState({error:e})})},a.handleClickCancel=function(){a.props.history.push("/")},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.error;return r.a.createElement("section",{className:"AddBookmark"},r.a.createElement("h2",null,"Create a bookmark"),r.a.createElement("form",{className:"AddBookmark__form",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"AddBookmark__error",role:"alert"},e&&r.a.createElement("p",null,e.message)),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"title"},"Title"," ",r.a.createElement(E,null)),r.a.createElement("input",{type:"text",name:"title",id:"title",placeholder:"Great website!",required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"url"},"URL"," ",r.a.createElement(E,null)),r.a.createElement("input",{type:"url",name:"url",id:"url",placeholder:"https://www.great-website.com/",required:!0})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"description"},"Description"),r.a.createElement("textarea",{name:"description",id:"description"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"rating"},"Rating"," ",r.a.createElement(E,null)),r.a.createElement("input",{type:"number",name:"rating",id:"rating",defaultValue:"1",min:"1",max:"5",required:!0})),r.a.createElement("div",{className:"AddBookmark__buttons"},r.a.createElement("button",{type:"button",onClick:this.handleClickCancel},"Cancel")," ",r.a.createElement("button",{type:"submit"},"Save"))))}}]),t}(n.Component);f.contextType=b,f.defaultProps={rating:1,description:""};var v=f;function _(e){console.log("props :>> ",e);var t=[0,0,0,0,0].map(function(t,a){return a<e.value?r.a.createElement("span",{key:a},"\u2605 "):r.a.createElement("span",{key:a},"\u2606 ")});return r.a.createElement("div",{className:"rating"},t)}_.defaultProps={value:1};a(25);function B(e){return r.a.createElement(b.Consumer,null,function(t){return r.a.createElement("li",{className:"BookmarkItem"},r.a.createElement("div",{className:"BookmarkItem__row"},r.a.createElement("h3",{className:"BookmarkItem__title"},r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.title)),r.a.createElement(_,{value:e.rating})),r.a.createElement("p",{className:"BookmarkItem__description"},e.description),r.a.createElement("div",{className:"BookmarkItem__buttons"},r.a.createElement("button",{className:"BookmarkItem__description",onClick:function(){var a,n;a=e.id,n=t.deleteBookmark,fetch(h.API_ENDPOINT+"/".concat(a),{method:"DELETE",headers:{authorization:"bearer ".concat(h.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){n(a)}).catch(function(e){console.error(e)})}},"Delete")))})}B.defaultProps={onClickDelete:function(){}};a(27);var N=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.context.bookmarks;return r.a.createElement("section",{className:"BookmarkList"},r.a.createElement("h2",null,"Your bookmarks"),r.a.createElement("ul",{className:"BookmarkList__list","aria-live":"polite"},e.map(function(e){return r.a.createElement(B,Object.assign({key:e.id},e))})))}}]),t}(n.Component);N.contextType=b,N.defaultProps={bookmarks:[]};var g=N,O=a(35);function y(e){return r.a.createElement("nav",{className:"Nav"},r.a.createElement(O.a,{to:"/"},"Bookmark List")," ",r.a.createElement(O.a,{to:"/add-bookmark"},"Add Bookmark"))}a(31);var j=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(u.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={bookmarks:[],error:null},a.setBookmarks=function(e){console.log("b4 this.state.bookmarks :>> ",a.state.bookmarks),console.log("cb bookmarks :>> ",e),a.setState({bookmarks:e,error:null}),console.log("after this.state.bookmarks :>> ",a.state.bookmarks)},a.addBookmark=function(e){console.log("---IN addBookmark cb"),console.log("before this.state.bookmarks :>> ",a.state.bookmarks),a.setState({bookmarks:Object(i.a)(a.state.bookmarks).concat([e])})},a.deleteBookmark=function(e){var t=a.state.bookmarks.filter(function(t){return t.id!==e});a.setState({bookmarks:t})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log("this.state.bookmarks :>> ",this.state.bookmarks),fetch(h.API_ENDPOINT,{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(h.API_KEY)}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(function(t){e.setBookmarks(t)}).catch(function(t){return e.setState({error:t})})}},{key:"render",value:function(){console.log("render app");var e={bookmarks:this.state.bookmarks,addBookmark:this.addBookmark,deleteBookmark:this.deleteBookmark};return r.a.createElement("main",{className:"App"},r.a.createElement("h1",null,"Bookmarks!"),r.a.createElement(g,{bookmarks:[{a:2,b:4},{a:9,b:12}]}),r.a.createElement(_,{value:9}),r.a.createElement(b.Provider,{value:e},r.a.createElement(y,null),r.a.createElement("div",{className:"content","aria-live":"polite"},r.a.createElement(p.a,{path:"/add-bookmark",component:v}),r.a.createElement(p.a,{exact:!0,path:"/",component:g}))))}}]),t}(n.Component);console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_KEY:"`$$2a$10$ra1z0n2XnSnbMP/ipTMHeOqqrI7i8Rssm/z8MHTxgb7LamV7LpfXu`"})),l.a.render(r.a.createElement(c.a,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[16,2,1]]]);
//# sourceMappingURL=main.a76fb003.chunk.js.map